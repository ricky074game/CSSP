function address_delete(el){confirm("Are you sure that you want to delete this address?")&&(el=el.parents("tbody").eq(0),el.find(".address_delete").val("1"),el.find(".address_id").val()==""?el.remove():(el.addClass("address_delete"),el.find("select").prop("disabled",!0)),address_number(el))}function address_type_change(el){el=$(el);var val=el.val();el=el.parents("tbody:eq(0)");el.attr("data-address-type",val);el.find(".address_mailing").showAndEnable(val!="permanent")}function address_duplicate_permanent(el){var fields,i,field_per,field_cur;el=$(el);var cur=el.parents("tbody").eq(0),par=cur.parents("table").eq(0),per=par.find('tbody[data-address-type = "permanent"]');if(per.length==0)return alert("There is no permanent address available to copy."),el.parents("tr").remove(),!1;for(fields=["country","region","postal","city","street"],i=0;i<fields.length;i++)field_per=per.find('[name $= "'+fields[i]+'"]'),field_cur=el.parents("tbody").find('[name $= "'+fields[i]+'"]'),field_cur.val(field_per.val()).triggerHandler("change");return!1}function address_insert(el){var scripts,i;address_count==-1?address_count=el.parents("table").eq(0).children("tbody.address").length+1:address_count++;var insert_tbody=el.parents("tbody").eq(0),insert_table=insert_tbody.parents("table").eq(0),el_default=insert_table.children("tbody.hidden").eq(0).html(),el2=$('<tbody class="address">'+el_default.replace(/_0_/g,address_count.toString())+"<\/tbody>");for(el2.find(".x-script").remove(),el2.insertBefore(insert_tbody),el2.find("select").eq(1).val("US"),scripts=el.parents("table").eq(0).children("tbody.hidden").eq(0).find(".x-script"),i=0;i<scripts.length;i++)eval(scripts.eq(i).text().replace(/_0_/g,address_count.toString()));address_number(el)}function address_number(el){var limit=parseFloat($("#address_insert_tbody").data("limit"));$("#address_insert_tbody").show(el.parents("table").eq(0).children("tbody.address").length-el.parents("table").eq(0).children("tbody.address.address_delete").length<limit)}function _citizenship(){var country=FW.Config["Citizenship.Default.Country"],citz1=$("#citizenship1").val(),citz2=$("#citizenship2").val(),is_citizen=citz1==country||citz2==country;(is_citizen||citz1=="")&&$("#resident").prop("checked",!1);$("#layer_resident").enable(!is_citizen&&citz1!="").show(!is_citizen&&citz1!="");$("#layer_alien").enable($("#resident").prop("checked")).show($("#resident").prop("checked"));is_citizen||(is_citizen=$("#resident").prop("checked"));$("#layer_visa").enable(!is_citizen&&citz1!="").show(!is_citizen&&citz1!="");$("#layer_ssn,#layer_background").enable(is_citizen).show(is_citizen).find("[onchange]").trigger("change");$("#layer_hispanicOrigin").enable($("#hispanic_1").prop("checked")).show($("#hispanic_1").prop("checked"));$("#layer_hispanicOther").enable($("#hispanicOrigin_other").prop("checked")&&$("#hispanic_1").prop("checked")).show($("#hispanicOrigin_other").prop("checked"));$("#layer_raceOther").enable($("#race_other").prop("checked")).show($("#race_other").prop("checked"))}var address_count=-1;$(_citizenship);